/*
 * Super modern service by d0now
 * for belluminar 2019
 * git : github.com/d0now/2019_belluminar
*/

#ifndef _MAIN_H_
#define _MAIN_H_

#include <errno.h>
#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include <string.h>
#include <sys/types.h>

#include <pthread.h>

#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#include <fcntl.h>
#include <unistd.h>

#include "binder.h"

#define BINDER_SVC_ID 0U
#define BINDER_SVC_NAME "super_modern_service"
#define BINDER_MSG_BUF_SIZE 0x1000

#define CLIENT_COUNT 16
#define CLIENT_STATE_CONNECT 1
#define CLIENT_STATE_SEND    2
#define CLIENT_STATE_CLOSE   3

#define SVC_CREATE_SERVER       0x13370000
#define SVC_CREATE_CLIENT       0x13370001
#define SVC_CLOSE               0x13370002
#define SVC_CREATE_FILTER       0x13370003
#define SVC_DELETE_FILTER       0x13370004
#define SVC_FILTER_EDIT_DESC    0x13370005
#define SVC_FILTER_DUMP_DESC    0x13370006
#define SVC_CLIENT_RECV         0x13370007
#define SVC_CLIENT_SEND         0x13370008

struct filter {
    struct filter *next;
    struct filter *prev;
    struct sockaddr_in addr;
    char desc[64];
    int refcount;
};

#endif